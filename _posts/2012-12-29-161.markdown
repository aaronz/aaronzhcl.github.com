---
layout: post
status: publish
published: true
title: Troubleshoot kernel mode memory leak
author:
  display_name: aaronzh
  login: wdadmin
  email: webdebug.net@gmail.com
  url: ''
author_login: wdadmin
author_email: webdebug.net@gmail.com
wordpress_id: 161
wordpress_url: http://www.webdebug.net:80/?p=161
date: '2012-12-29 14:00:03 +0800'
date_gmt: '2012-12-29 14:00:03 +0800'
categories:
- IIS
- Troubleshooting
- Windows
tags:
- memory leak
- Connections Refused
- NonPagePool
- driver
- kernel
comments:
- id: 4056
  author: 'Les Balades de Corto Maltese : Les sept portes magiques et leur itin&Atilde;&copy;raires'
  author_email: chanda_hildreth@care2.com
  author_url: ''
  date: '2014-05-04 12:40:36 +0800'
  date_gmt: '2014-05-04 12:40:36 +0800'
  content: "I'm gohe to tell my little brother, that he sould also pay a visit this
    weblkg on regular \r\nbasis to take updated from mmost up-to-date reports."
- id: 7171
  author: homeowners insurance Miami
  author_email: olivalovelace@arcor.de
  author_url: ''
  date: '2014-05-22 03:32:53 +0800'
  date_gmt: '2014-05-22 03:32:53 +0800'
  content: "This is my first time go to see at here and i am genuinely \r\npleassant
    to read all at one place."
- id: 7511
  author: scam
  author_email: jane.wicker@gmail.com
  author_url: ''
  date: '2014-05-24 03:04:19 +0800'
  date_gmt: '2014-05-24 03:04:19 +0800'
  content: "Why viewers still make use of to read news papers when in this technological
    globe all is \r\npresented on web?"
- id: 8931
  author: http:&#47;&#47;endurabletyro77263330.pen.io&#47;
  author_email: jonellepinschof@googlemail.com
  author_url: ''
  date: '2014-06-01 11:54:06 +0800'
  date_gmt: '2014-06-01 11:54:06 +0800'
  content: Je pense que j'en parlerai sur un site internet personnel
- id: 11090
  author: servers ibm
  author_email: addiedespeissis@fastem.com
  author_url: http://www.jonginbeernem.be/forum/member.php?action=profile&amp;uid=1726
  date: '2014-06-14 11:08:38 +0800'
  date_gmt: '2014-06-14 11:08:38 +0800'
  content: "I have read some excellent stuff here. Definitely value bookmarking for
    revisiting.\r\nI wonder how much attempt you put to create the sort of wonderful
    informative \r\nsite."
- id: 11167
  author: book download
  author_email: darrell_valentine@gmail.com
  author_url: http://leatherjourney.org/users.php?mode=profile&amp;uid=146927
  date: '2014-06-14 22:44:15 +0800'
  date_gmt: '2014-06-14 22:44:15 +0800'
  content: "Hello, this weekend is nice designed for me, since this time \r\ni am
    reading this enormous informative post here at my home.\r\n\r\n\r\n\r\nMy blog
    post - <a href=\"http:&#47;&#47;leatherjourney.org&#47;users.php?mode=profile&amp;uid=146927\"
    rel=\"nofollow\">book download<&#47;a>"
- id: 11628
  author: Petit Livre de - L'anglais en 5 minutes par jour pdf
  author_email: marie.tibbs@gmail.com
  author_url: http://pkadeluigi.soup.io
  date: '2014-06-18 06:37:12 +0800'
  date_gmt: '2014-06-18 06:37:12 +0800'
  content: "Good site you have here.. It's hard to find high-quality writing like
    yours nowadays.\r\n\r\nI seriously appreciate people like you! Take care!!\r\n\r\n\r\nMy
    webpage :: <a href=\"http:&#47;&#47;pkadeluigi.soup.io\" rel=\"nofollow\">Petit
    Livre de - L'anglais en 5 minutes par jour pdf<&#47;a>"
- id: 12851
  author: sodomisatrice
  author_email: glenna_zambrano@gmail.com
  author_url: http://clumsybruise2070.blog.com/2014/04/13/le-site-dun-male/
  date: '2014-06-23 10:57:06 +0800'
  date_gmt: '2014-06-23 10:57:06 +0800'
  content: Vous nous concoctez constamment des posts fascinants
- id: 13724
  author: local green energy
  author_email: robwilder@t-online.de
  author_url: https://flattr.com/profile/virgilioneagle
  date: '2014-06-29 17:43:43 +0800'
  date_gmt: '2014-06-29 17:43:43 +0800'
  content: "Thajk you for sharing your info. I truly appreciate your efforts and I
    will be \r\nwaiting for your next write ups thank you once again.\r\n\r\nHerre
    iss my web-site: <a href=\"https:&#47;&#47;flattr.com&#47;profile&#47;virgilioneagle\"
    rel=\"nofollow\">local green energy<&#47;a>"
- id: 13861
  author: homes adelaide
  author_email: agnesgagnon@yahoo.de
  author_url: http://profundidadedecampo.tumblr.com/
  date: '2014-06-30 13:19:41 +0800'
  date_gmt: '2014-06-30 13:19:41 +0800'
  content: "Howdy! I could have sworn I've been to this web sute before but after
    browsing through a few of thee posts I realized it's new to me.\r\nRegardless,
    I'm certainly happy I came across it and I'll be bookmarking it and checking back
    regularly!\r\n\r\n\r\nCheck out my weblog ... <a href=\"http:&#47;&#47;profundidadedecampo.tumblr.com&#47;\"
    rel=\"nofollow\">homes adelaide<&#47;a>"
- id: 19273
  author: affordable dentures tampa florida
  author_email: noreenmarch@care2.com
  author_url: https://www.youtube.com/watch?v=01AqvomcmV8
  date: '2014-08-06 09:23:55 +0800'
  date_gmt: '2014-08-06 09:23:55 +0800'
  content: "I am in fact thankful to the holder of this site who has shared this \r\ngreat
    piece of writing at at this time.\r\n\r\nmy homepage; <a href=\"https:&#47;&#47;www.youtube.com&#47;watch?v=01AqvomcmV8\"
    rel=\"nofollow\">affordable dentures tampa florida<&#47;a>"
- id: 20292
  author: http:&#47;&#47;Www.0Dl.biz&#47;
  author_email: ellisseabrook@gmail.com
  author_url: http://Www.0Dl.biz/
  date: '2014-08-15 07:55:25 +0800'
  date_gmt: '2014-08-15 07:55:25 +0800'
  content: Bon, jе n'ai gu&egrave;re fini de regarԀer toutefois je revkens dans la
    ʝourn&eacute;e
- id: 20488
  author: boating holidays norfolk broads brundall
  author_email: edisonmulgrave@gmail.com
  author_url: http://bestwwwhost.com/9399/sailing-and-boating-golden-leisure-in-the-uk/
  date: '2014-08-17 04:57:45 +0800'
  date_gmt: '2014-08-17 04:57:45 +0800'
  content: "Hello! Do you use Twitter? I'd like to follow you if that would be ok.\r\nI'm
    definitely enjoying your blog and look forward to new posts."
- id: 21751
  author: Elbert
  author_email: elbert.cotton@gmail.com
  author_url: http://biotechpub.com/pc-support-helpline/
  date: '2014-08-28 05:50:47 +0800'
  date_gmt: '2014-08-28 05:50:47 +0800'
  content: Hi, i think that i noticed you visited my weblog thus i came to return
    the favor?.I'm attempting to to find things to improve my website!I suppose its
    good enough to make use of some of your concepts!!
---
<p><a href="http:&#47;&#47;support.microsoft.com&#47;kb&#47;177415" target="_blank"><strong>How to use Memory Pool Monitor (Poolmon.exe) to troubleshoot kernel mode memory leaks<&#47;strong><&#47;a></p>
<p>This article describes how to use the Memory Pool Monitor utility, Poolmon.exe, as a troubleshooting tool to monitor memory tags.</p>
<p>Poolmon displays data that the operating system collects about memory allocations from the system paged and nonpaged kernel pools and about the memory pools used for Terminal Services sessions. The data is grouped by pool allocation tag. This information can be used by Microsoft Technical Support to find kernel mode memory leaks.</p>
<p>A memory leak is caused by an application or by a process that allocates memory for use but that does not free the memory when the application or process finishes. Therefore, available memory is completely used over time. Frequently, this condition causes the system to stop functioning correctly.</p>
<p><code>In this case, the following events may be logged in the System log:<br />
Event ID: 2020<br />
Source: Srv<br />
Description: The server was unable to allocate from the system paged pool because the pool was empty.<&#47;code></p>
<p><code>Event ID: 2019<br />
Source: Srv<br />
Description: The server was unable to allocate from the system nonpaged pool because the pool was empty.<&#47;code></p>
<p>In <strong>httperror<&#47;strong> log, there will be <strong>Connections_Refused<&#47;strong> errors which makes the websites stop to accept new connections. This usually indicates the kernel NonPagedPool memory has dropped below 20MB and http.sys has stopped receiving new connections.</p>
<p><a href="http:&#47;&#47;support.microsoft.com&#47;kb&#47;298102" target="_blank"><strong>How to find pool tags that are used by third-party drivers<&#47;strong><&#47;a></p>
<p>This article describes how to find the source of a pool tag that is used by a third-party driver. This may be useful because when you troubleshoot an issue, you may encounter a pool tag that cannot be tied to a Microsoft component, and finding the source of these tags can be complicated and is often impossible without the use of a kernel-mode debugger.</p>
<p><a href="http:&#47;&#47;msdn.microsoft.com&#47;en-us&#47;windows&#47;hardware&#47;gg463213" target="_blank"><strong>Who's Using the Pool?<&#47;strong><&#47;a></p>
